function login(){if(!'localStorage'in window){window.alert("LocalStorage Not Found");return}const chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let nonce="",state="";for(let i=0;i<16;i++){nonce+=chars[Math.floor(Math.random()*chars.length)];state+=chars[Math.floor(Math.random()*chars.length)]}localStorage.setItem("nonce",nonce);localStorage.setItem("state",state);window.location.href="https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize?client_id=ca10efe7-21c8-4a22-97a2-0ecd38853ab2&response_mode=fragment&response_type=id_token&redirect_uri=https%3A%2F%2Fwww.jawbts.xyz%2Fauth&scope=openid&state="+state+"&nonce="+nonce}$(document).ready(function(){let hash=window.location.hash;if(hash.substr(0,10)!="#id_token="){return}document.getElementById("hide").style.display="none";let id_token,state;try{id_token=hash.match(/=\S+&/).toString().match(/[^=&]+/).toString();state=hash.match(/e=\S+/).toString();state=state.substr(1,state.length).match(/[^=&]+/).toString()}catch(e){loginFailed(e.message);return}if(state!=localStorage.getItem("state")){loginFailed("Wrong State");return}try{$.ajax({type:'GET',url:'https://api.jawbts.xyz/profiles/me',headers:{Authorization:"Bearer "+id_token},data:{"nonce":localStorage.getItem("nonce"),"forcedStatus":"200"},dataType:'JSON',success:function(response){if(response.success=="true"){$("#logintitle").text("Welcome Back, "+response.data.Name);$("#logindiscription").text("Your Permission: "+response.data.Permission)}else{loginFailed(response.reason)}return},})}catch(e){loginFailed(e.message);return}});function loginFailed(reason){$("#logintitle").text(reason);$("#hide").style.dispaly="inline"}